import static org.junit.jupiter.api.Assertions.*;

import java.io.ByteArrayOutputStream;
import java.io.PrintStream;

import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

public class UbicacionTest {

    private final PrintStream originalOut = System.out;
    private final ByteArrayOutputStream outContent = new ByteArrayOutputStream();

    @BeforeEach
    public void setUp() {
        Ubicacion.setPointer(1); // Reset pointer
        System.setOut(new PrintStream(outContent));
    }

    @AfterEach
    public void tearDown() {
        System.setOut(originalOut);
    }

    @Test
    public void testConstructorAndGetters() {
        Ubicacion ubi = new Ubicacion("Calle Falsa 123", "Interior");
        assertEquals(1, ubi.getId());
        assertEquals("Calle Falsa 123", ubi.getDirection());
        assertEquals("Interior", ubi.gettype());
    }

    @Test
    public void testCreateUbicacionSuccess() {
        Ubicacion ubi = new Ubicacion("Av. Principal", "Exterior");
        ubi.createUbicacion();
        String output = outContent.toString().trim();
        assertEquals("Ubicación creada correctamente", output);
    }

    @Test
    public void testCreateUbicacionError() {
        Ubicacion ubi = new Ubicacion(null, null);
        ubi.createUbicacion();
        String output = outContent.toString().trim();
        assertEquals("Error, debe agregar dirección y type", output);
    }

    @Test
    public void testSetters() {
        Ubicacion ubi = new Ubicacion("Dir 1", "Tipo A");
        ubi.setId(10);
        ubi.setDirection("Dir 2");
        ubi.settype("Tipo B");

        assertEquals(10, ubi.getId());
        assertEquals("Dir 2", ubi.getDirection());
        assertEquals("Tipo B", ubi.gettype());
    }

    @Test
    public void testToString() {
        Ubicacion ubi = new Ubicacion("Plaza Central", "Cubierta");
        String expected = "Ubicacion [id=1, direction=Plaza Central, type=Cubierta]";
        assertEquals(expected, ubi.toString());
    }
}